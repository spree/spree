<%= render :partial => 'spree/admin/shared/configuration_menu' %>

<% content_for :page_title do %>
  <%= t(:bulk_transfer_stock) %>
<% end %>

<% content_for :page_actions do %>
  <ul class="actions inline-menu">
    <li>
    </li>
  </ul>
<% end %>

<script type='text/template' id='bulk_variant_template'>
  <tr>
    <td>{{name}}</td>
    <td>{{quantity}}</td>
    <td><button class='icon-minus bulk_remove_variant button'
                data-variant-id='{{id}}' data-variant-name='{{name}}'>remove</button></td>
    <input type='hidden' id='variant[]' name='variant[]' value='{{id}}'>
    <input type='hidden' id='quantity[]' name='quantity[]' value='{{quantity}}'>
  </tr>
</script>

<%= form_tag admin_bulk_transfer_path, :method => :post do %>
  <fieldset>
    <legend align="center"><%= t(:bulk_transfer_stock)%></legend>
    <div data-hook="admin_stock_movements_form_fields" class="row">
        <div class="five columns">
          <div class="field" id="stock_movement_reference_number_field">
            <%= label_tag 'reference_number', t(:reference_number) %>
            <%= text_field_tag :reference_number %> (<%= t(:optional) %>)
          </div>
        </div>
        <div class="five columns">
          <div class="field" id="receive_stock_field">
            <%= check_box_tag :bulk_receive_stock %>
            <%= label_tag :receive_stock, t(:receive_stock) %>
          </div>
        </div>
        <div class="five columns">
          <div class="field" id="source_location_id_field">
            <%= label_tag :source_location_id, t(:transfer_from_location) %>
            <%= select_tag :source_location_id, options_from_collection_for_select(@stock_locations, :id, :name), class: 'select2 fullwidth' %>
          </div>
        </div>
        <div class="five columns">
          <div class="field" id="destination_location_id_field">
            <%= label_tag :destination_location_id, t(:transfer_to_location) %>
            <%= select_tag :destination_location_id, options_from_collection_for_select(@stock_locations, :id, :name), class: 'select2 fullwidth' %>
          </div>
        </div>

        <div class="five columns">
          <div class="field" id="stock_movement_variant_id_field">
            <%= label_tag 'variant_id', t(:variant) %>
            <%= select_tag 'bulk_variant', options_from_collection_for_select(@variants, :id, :name), class: 'select2 fullwidth' %>
          </div>
        </div>
        <div class="five columns">
          <div class="field" id="stock_movement_quantity_field">
            <%= label_tag 'quantity', t(:quantity) %>
            <%= number_field_tag 'bulk_variant_quantity', 1, class: 'fullwidth' %>
          </div>
          <%= button t(:add), 'icon-plus bulk_add_variant' %>
        </div>
      </div>

      <div class="ten columns">
        <table class="index sortable">
          <colgroup>
            <col style="width: 50%" />
            <col style="width: 30%" />
            <col style="width: 20%" />
          </colgroup>
          <thead data-hook="bulk_variants_header">
            <tr>
              <th><%= t(:name) %></th>
              <th><%= t(:quantity) %></th>
              <th><%= t(:remove) %></th>
            </tr>
          </thead>
          <tbody id="bulk_variants_tbody">
          </tbody>
        </table>
      </div>
    </div>

    <div class="form-buttons filter-actions actions" data-hook="buttons">
      <%= button t(:transfer_stock), 'icon-plus bulk_transfer' %>
    </div>
  </fieldset>
<% end %>
