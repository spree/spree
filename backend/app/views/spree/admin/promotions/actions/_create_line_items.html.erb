<% promotion_action.promotion_action_line_items.each do |item| %>
  <strong><%= item.quantity %> x <%= item.variant.product.name %></strong>
  <%= item.variant.options_text %>
<% end %>

<% if promotion_action.promotion_action_line_items.empty? %>
  <% line_items = promotion_action.promotion_action_line_items %>
  <% line_items.build %>

  <% line_items.each_with_index do |line_item, index| %>
    <div class="add-line-item">
      <div class="row">
        <% line_item_prefix = "#{param_prefix}[promotion_action_line_items_attributes][#{index}]" %>
        <div class="field alpha six columns">
          <%= label_tag "#{line_item_prefix}_variant_id", Spree.t(:variant) %>
          <%= hidden_field_tag "#{line_item_prefix}[variant_id]", line_item.variant_id, class: "variant_autocomplete fullwidth" %>
        </div>
        <div class="field omega two columns">
          <%= label_tag "#{line_item_prefix}_quantity", Spree.t(:quantity) %>
          <%= number_field_tag "#{line_item_prefix}[quantity]", line_item.quantity, min: 1, class: 'fullwidth' %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
