<div data-hook="admin_user_lifetime_stats" class="card mb-3">
  <div class="card-header">
    <h1 class="card-title mb-0 h5">
      <%= Spree.t(:lifetime_stats) %>
    </h1>
  </div>
  <div class="table-responsive">
    <table class="table" id="user-lifetime-stats" data-hook>
      <tr>
        <td width="30%"><%= Spree.t(:total_sales) %>:</td>
        <td><%= Spree::Money.new(@user.orders.complete.where(store: current_store).sum(:total), currency: current_store.default_currency).to_html %></td>
      </tr>
      <tr>
        <td><%= Spree.t(:num_orders) %>:</td>
        <td><%= @user.orders.complete.where(store_id: current_store.id).size %></td>
      </tr>
      <tr>
        <td><%= Spree.t(:average_order_value) %>:</td>
        <td><%= Spree::Money.new(@user.orders.complete.where(store_id: current_store.id).average(:total), currency: current_store.default_currency).to_html %></td>
      </tr>
      <tr>
        <td><%= Spree.t('admin.user.store_credits') %>:</td>
        <td id="store_credit"><%= Spree::Money.new(@user.store_credits.where(currency: current_store.default_currency).reload.to_a.sum(&:amount_remaining)) %></td>
      </tr>
      <tr>
        <td><%= Spree.t(:member_since) %>:</td>
        <td><%= pretty_time(@user.created_at) %></td>
      </tr>
    </table>
  </div>
</div>
