---
title: SEO URLs
description: Learn how to create SEO-friendly URLs for the Brands feature
---

It's a good practice to create SEO-friendly URLs for your resources. This helps with SEO and improves the user experience. 

Rather than using database IDs in the URL, eg. 

```bash
https://example.com/brands/1
```

You can use a nice human readable URL, eg. 
```bash
https://example.com/brands/nike-sportswear
```

It's very easy to achieve this with Spree.

## Step 1: Add `slug` column to the database table

Now we need to add a `slug` column to the database table. This column will be used to store the SEO-friendly URL for the brand.

```bash
bin/rails g migration AddSlugToSpreeBrands slug:string:uniq
```

This will create a new migration file at `db/migrate/<YYYYMMDDHHMMSS>_add_slug_to_spree_brands.rb`.

Now run the migration:

```bash
bin/rails db:migrate
```

This will add the `slug` column to the `spree_brands` table and add a unique index on the `slug` column so there's no duplicate slugs.

## Step 2: Add `FriendlyId` to the model

Now we need to add `FriendlyId` to the model. This will allow us to generate the SEO-friendly URLs for the brand.

```ruby app/models/spree/brand.rb
module Spree
  class Brand < Spree::Base
    extend FriendlyId # [!code ++:2]
    friendly_id :slug_candidates, use: %i[slugged]

    # ... other code ...

    # Validations
    validates :name, presence: true
    validates :slug, presence: true, uniqueness: true # [!code ++]
  end
end
```

`slug_candidates` is a method that returns an array of candidate strings for the slug. It is already defined in `Spree::Base` so we don't need to override it.

```ruby
def slug_candidates
  [
    :name,
    [:name, :uuid_for_friendly_id]
  ]
end
```

This will generate the slug from the name of the brand. If the name is already taken, it will append a random UUID to the end of the slug.

You can override this method if you need to customize the slug generation logic.

We've also added validations to the model to ensure that the slug is present and unique.

## Step 3: Add ability for admins to set slugs manually

We already have automatic slug generation, but sometimes you might want to set the slug manually. For example, if you want to use a custom slug for a brand.

To allow this in Admin dashboard, we need to add a form field for the slug to the `app/views/spree/admin/brands/_form.html.erb` file.

```erb
<div class="card mb-4">
  <div class="card-body">
    <%= f.spree_text_field :name, required: true, autofocus: true %>
    <%= f.spree_text_field :slug %> <!-- [!code ++] -->
    <%= f.spree_rich_text_area :description %>
  </div>
</div>
```

That's nice but we can make it even better by using the `slug-form` Stimulus Javascript controller to auto-generate the slug from the name of the brand as user types the name.

```erb
<div class="card mb-4"> <!-- [!code --] -->
<div class="card mb-4" data-controller="slug-form"> <!-- [!code ++] -->
  <div class="card-body">
    <%= f.spree_text_field :name, required: true, autofocus: true %> # [!code --]
    <%= f.spree_text_field :name, required: true, autofocus: true, data: { slug_form_target: 'name', action: 'slug-form#updateUrlFromName' } %> <!-- [!code ++] -->
    <%= f.spree_text_field :slug %> <!-- [!code --] -->
    <%= f.spree_text_field :slug, data: { slug_form_target: 'url' } %> <!-- [!code ++] -->
    <%= f.spree_rich_text_area :description %>
  </div>
</div>
```

## Step 4: Use Slugs in Storefront

TODO: Add instructions on how to use the slugs in the Storefront.
