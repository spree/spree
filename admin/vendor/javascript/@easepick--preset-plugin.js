// @easepick/preset-plugin@1.2.1 downloaded from https://ga.jspm.io/npm:@easepick/preset-plugin@1.2.1/dist/index.esm.js

import{DateTime as t}from"@easepick/datetime";import{BasePlugin as e}from"@easepick/base-plugin";class s extends e{dependencies=["RangePlugin"];binds={onView:this.onView.bind(this),onClick:this.onClick.bind(this)};options={customLabels:["Today","Yesterday","Last 7 Days","Last 30 Days","This Month","Last Month"],customPreset:{},position:"left"};getName(){return"PresetPlugin"}onAttach(){if(!Object.keys(this.options.customPreset).length){const e=new t,s=()=>{const n=e.clone();n.setDate(1);const o=new Date(e.getFullYear(),e.getMonth()+1,0);return[new t(n),new t(o)]},i=()=>{const n=e.clone();n.setMonth(n.getMonth()-1),n.setDate(1);const o=new Date(e.getFullYear(),e.getMonth(),0);return[new t(n),new t(o)]},n=[[e.clone(),e.clone()],[e.clone().subtract(1,"day"),e.clone().subtract(1,"day")],[e.clone().subtract(6,"day"),e.clone()],[e.clone().subtract(29,"day"),e.clone()],s(),i()];Object.values(this.options.customLabels).forEach(((t,e)=>{this.options.customPreset[t]=n[e]}))}this.picker.on("view",this.binds.onView),this.picker.on("click",this.binds.onClick)}onDetach(){this.picker.off("view",this.binds.onView),this.picker.off("click",this.binds.onClick)}onView(t){const{view:e,target:n}=t.detail;if("Main"===e){const t=document.createElement("div");t.className="preset-plugin-container",Object.keys(this.options.customPreset).forEach((e=>{if(Object.prototype.hasOwnProperty.call(this.options.customPreset,e)){const n=this.options.customPreset[e],o=document.createElement("button");o.className="preset-button unit",o.innerHTML=e,o.dataset.start=n[0].getTime(),o.dataset.end=n[1].getTime(),t.appendChild(o),this.picker.trigger("view",{view:"PresetPluginButton",target:o})}})),n.appendChild(t),n.classList.add(`preset-${this.options.position}`),this.picker.trigger("view",{view:"PresetPluginContainer",target:t})}}onClick(e){const n=e.target;if(n instanceof HTMLElement){const e=n.closest(".unit");if(!(e instanceof HTMLElement))return;if(this.isPresetButton(e)){const n=new t(Number(e.dataset.start)),o=new t(Number(e.dataset.end));this.picker.options.autoApply?(this.picker.setDateRange(n,o),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.picker.datePicked=[n,o],this.picker.renderAll())}}}isPresetButton(t){return t.classList.contains("preset-button")}}export{s as PresetPlugin};

