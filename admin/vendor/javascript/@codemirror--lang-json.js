// @codemirror/lang-json@6.0.2 downloaded from https://ga.jspm.io/npm:@codemirror/lang-json@6.0.2/dist/index.js

import{parser as e}from"@lezer/json";import{LRLanguage as t,indentNodeProp as r,foldNodeProp as n,continuedIndent as a,foldInside as o,LanguageSupport as s}from"@codemirror/language";const c=()=>e=>{try{JSON.parse(e.state.doc.toString())}catch(t){if(!(t instanceof SyntaxError))throw t;const r=i(t,e.state.doc);return[{from:r,message:t.message,severity:"error",to:r}]}return[]};function i(e,t){let r;return(r=e.message.match(/at position (\d+)/))?Math.min(+r[1],t.length):(r=e.message.match(/at line (\d+) column (\d+)/))?Math.min(t.line(+r[1]).from+ +r[2]-1,t.length):0}const m=t.define({name:"json",parser:e.configure({props:[r.add({Object:a({except:/^\s*\}/}),Array:a({except:/^\s*\]/})}),n.add({"Object Array":o})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function d(){return new s(m)}export{d as json,m as jsonLanguage,c as jsonParseLinter};

