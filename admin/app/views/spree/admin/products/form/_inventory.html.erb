<div class="inventory-form card mb-6">
  <div class="card-header flex items-center justify-between">
    <h5 class="card-title"><%= Spree.t(:inventory) %></h5>

    <% if can?(:manage, Spree::StockLocation) %>
      <%= link_to_with_icon 'adjustments', Spree.t('admin.manage_stock_locations'), spree.admin_stock_locations_path, class: 'btn btn-sm btn-light' %>
    <% end %>
  </div>
  <div class="card-body">
    <div class="custom-control form-checkbox mb-6">
      <%= f.check_box :track_inventory,
            class: 'custom-control-input',
            data: {
              product_form_target: 'trackInventoryCheckbox',
              action: 'product-form#toggleQuantityTracked'
            }
          %>
      <%= f.label :track_inventory, Spree.t(:track_quantity), class: 'custom-control-label' %>
    </div>
    <div
      class="master-variant-quantity-form <%= @product.has_variants? || !@product.track_inventory ? 'hidden' : '' %>"
      data-product-form-target="<%= @product.has_variants? ? '' : 'quantityForm' %>"
    >
      <h6 class="font-bold"><%= Spree.t(:quantity) %></h6>
      <hr class="my-6">
      <div>
        <%= f.fields_for :master, @product.master do |vf| %>
          <%= vf.fields_for :stock_items do |sif| %>
            <%= sif.hidden_field :stock_location_id %>
            <div class="grid grid-cols-12 gap-6 mb-2">
              <div class="col-span-12 md:col-span-6 flex items-center">
                <%= sif.object.stock_location.name %>
              </div>
              <div class="col-span-12 md:col-span-2">
                <%= sif.number_field :count_on_hand, class: 'form-input' %>
              </div>
              <div class="col-span-12 md:col-span-4">
                <div class="custom-control form-checkbox flex items-center h-full">
                  <%= sif.check_box :backorderable, class: 'custom-control-input' %>
                  <%= sif.label :backorderable, Spree.t(:continue_selling_when_out_of_stock), class: 'custom-control-label' %>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="grid grid-cols-12 gap-6">
      <div class="col-span-12 md:col-span-6">
        <div class="form-group">
          <%= f.label :sku, Spree.t('admin.products.inventory.sku') %>
          <%= f.text_field :sku, class: 'form-input' %>
        </div>
      </div>
      <div class="col-span-12 md:col-span-6">
        <div class="form-group">
          <%= f.label :barcode, Spree.t('admin.products.inventory.barcode') %>
          <%= f.text_field :barcode, class: 'form-input' %>
        </div>
      </div>
    </div>
  </div>
</div>
