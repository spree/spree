<div data-controller="reveal" data-reveal-hidden-class="hidden">
  <div class="custom-control custom-radio">
    <%= f.radio_button :kind, :coupon_code, data: { action: 'change->reveal#show' }, class: 'custom-control-input' %>
    <%= f.label :kind_coupon_code, Spree.t(:coupon_code), class: 'custom-control-label' %>

    <div data-reveal-target="item" class="rounded-md p-6 bg-gray-25 mt-6 <% if @promotion.automatic? %>hidden<% end %>">
      <div data-controller="reveal" data-reveal-hidden-class="hidden">
        <div class="custom-control custom-radio">
          <%= f.radio_button :multi_codes, false, data: { action: 'change->reveal#toggle' }, class: 'custom-control-input' %>
          <%= f.label :multi_codes_false, class: 'custom-control-label flex-col items-start' do %>
            One code for all customers
            <span class="form-text font-normal">
              You can limit the number of times this code can be used.
            </span>
          <% end %>
        </div>
        <div data-reveal-target="item" class="mt-2 ml-6 <% if @promotion.multi_codes? %>hidden<% end %>">
          <%= f.text_field :code, class: 'form-input uppercase', placeholder: 'Your coupon code' %>
        </div>

        <div class="mt-6 custom-control custom-radio">
          <%= f.radio_button :multi_codes, true, data: { action: 'change->reveal#toggle' }, class: 'custom-control-input' %>
          <%= f.label :multi_codes_true, class: 'custom-control-label flex-col items-start' do %>
            Generate unique codes
            <span class="form-text font-normal">
              These codes are generated automatically and can be downloaded as a CSV file. Codes are unique and can only be used once.
            </span>
          <% end %>
        </div>
        <div data-reveal-target="item" class="ml-6 mt-2 grid gap-3 <% unless @promotion.multi_codes? %>hidden<% end %>">
          <div>
            <%= f.text_field :code_prefix, class: 'form-input uppercase', placeholder: 'Coupon Prefix (optional)' %>
            <span class="form-text mt-1">
              eg. <strong>ABC</strong>
            </span>
          </div>
          <div>
            <% minimum_number_of_codes = @promotion.persisted? && @promotion.coupon_codes.count.positive? ? @promotion.coupon_codes.count : 1 %>
            <% maximum_number_of_codes = ENV.fetch('PROMOTION_MAX_NUMBER_OF_CODES', 5000) %>
            <%= f.number_field :number_of_codes, class: 'form-input', placeholder: 'Number of codes', min: minimum_number_of_codes, max: maximum_number_of_codes, step: 1 %>
            <span class="form-text mt-1">
              How many codes you want to generate.
              <% if @promotion.persisted? %>
                To add more codes just increase this number
              <% end %>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-6 custom-control custom-radio">
    <%= f.radio_button :kind, :automatic, data: { action: 'change->reveal#hide' }, class: 'custom-control-input' %>
    <%= f.label :kind_automatic, Spree.t(:automatic_promotion), class: 'custom-control-label flex-col items-start' do %>
      <%= Spree.t(:automatic_promotion) %>
      <span class="form-text font-normal">
        This promotion will be automatically applied to all eligible orders.
      </span>
    <% end %>

  </div>
</div>