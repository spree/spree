<div class="custom-control custom-radio">
  <%= f.radio_button :kind, :coupon_code, data: { toggle: :collapse, target: '#coupon-code' }, class: 'custom-control-input' %>
  <%= f.label :kind_coupon_code, Spree.t(:coupon_code), class: 'custom-control-label' %>

  <div id="coupon-code" class="rounded p-3 bg-gray-25 mt-3 collapse <% unless @promotion.automatic? %>show<% end %>">
    <div class="d-flex align-items-start custom-control custom-radio">
      <%= f.radio_button :multi_codes, false, data: { toggle: :collapse, target: '#single-code' }, class: 'custom-control-input' %>
      <%= f.label :multi_codes_false, class: 'custom-control-label' do %>
        <%= Spree.t(:one_code_for_all_customers) %>
        <span class="form-text text-muted font-weight-normal mr-1">
          <%= Spree.t(:one_code_for_all_customers_help) %>
        </span>
      <% end %>
    </div>
    <div id="single-code" class="mb-4 mt-2 ml-4 collapse <% unless @promotion.multi_codes? %>show<% end %>" data-parent="#coupon-code">
      <%= f.text_field :code, class: 'form-control text-uppercase', placeholder: 'Your coupon code' %>
    </div>

    <div class="mt-2 d-flex align-items-start custom-control custom-radio">
      <%= f.radio_button :multi_codes, true, data: { toggle: :collapse, target: '#multi-codes' }, class: 'custom-control-input' %>
      <%= f.label :multi_codes_true, class: 'custom-control-label' do %>
        <%= Spree.t(:generate_unique_codes) %>
        <span class="form-text text-muted font-weight-normal mr-1">
          <%= Spree.t(:generate_unique_codes_help) %>
        </span>
      <% end %>
    </div>
    <div id="multi-codes" class="ml-3 mt-2 row collapse <% if @promotion.multi_codes? %>show<% end %>" data-parent="#coupon-code">
      <div class="col-6">
        <%= f.text_field :code_prefix, class: 'form-control text-uppercase', placeholder: Spree.t(:code_prefix_placeholder) %>
        <span class="form-text text-muted">
          <%= Spree.t(:code_prefix_help).html_safe %>
        </span>
      </div>
      <div class="col-6">
        <% minimum_number_of_codes = @promotion.persisted? && @promotion.coupon_codes.count.positive? ? @promotion.coupon_codes.count : 1 %>
        <% maximum_number_of_codes = ENV.fetch('PROMOTION_MAX_NUMBER_OF_CODES', 5000) %>
        <%= f.number_field :number_of_codes, class: 'form-control', placeholder: Spree.t(:number_of_codes), min: minimum_number_of_codes, max: maximum_number_of_codes, step: 1 %>
        <span class="form-text text-muted">
          <%= Spree.t(:number_of_codes_help) %>
          <% if @promotion.persisted? %>
            <%= Spree.t(:increase_number_to_add_codes) %>
          <% end %>
        </span>
      </div>
    </div>
  </div>
</div>

<div class="mt-4 custom-control custom-radio">
  <%= f.radio_button :kind, :automatic, data: { toggle: :collapse, target: '#coupon-code' }, class: 'custom-control-input' %>
  <%= f.label :kind_automatic, Spree.t(:automatic_promotion), class: 'custom-control-label' %>

  <p class="form-text text-muted mt-2 mb-0">
    <%= Spree.t(:automatic_promotion_help) %>
  </p>
</div>