/* ==========================================================================
   TOM SELECT CUSTOM STYLES
   ========================================================================== */

@layer components {
  /* Base wrapper */
  .ts-wrapper {
    position: relative;
  }

  .ts-wrapper.form-control,
  .ts-wrapper.form-select {
    padding: 0 !important;
  }

  /* Dropdown */
  .ts-dropdown,
  .ts-dropdown.form-control {
    @apply mt-1!;
    position: absolute;
    top: 110%;
    left: 0;
    width: 100%;
    height: auto;
    padding: 0.25rem;
    z-index: 10000000 !important;
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-dropdown);
  }

  .ts-dropdown .optgroup-header {
    @apply text-xs leading-normal;
  }

  .ts-dropdown .optgroup:first-child:before {
    display: none;
  }

  .ts-dropdown .optgroup:before {
    content: ' ';
    display: block;
    height: 0;
    margin: 0.5rem 0;
    overflow: hidden;
    border-top: 1px solid var(--color-border);
    margin-left: calc(-1 * 0.75rem);
    margin-right: calc(-1 * 0.75rem);
  }

  .ts-dropdown .create {
    padding-left: 0.75rem;
  }

  .ts-dropdown-content {
    padding: 0;
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 200px;
    overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  .ts-dropdown [data-selectable] {
    cursor: pointer;
    overflow: hidden;
  }

  .ts-dropdown [data-selectable] .highlight {
    background: rgba(255, 237, 40, 0.4);
    border-radius: 1px;
  }

  .ts-dropdown .option,
  .ts-dropdown .optgroup-header,
  .ts-dropdown .no-results,
  .ts-dropdown .create {
    padding: 0.5rem;
    border-radius: var(--radius-sm);
  }

  .ts-dropdown .option,
  .ts-dropdown [data-disabled],
  .ts-dropdown [data-disabled] [data-selectable].option {
    cursor: inherit;
    opacity: 0.5;
  }

  .ts-dropdown [data-selectable].option {
    opacity: 1;
    cursor: pointer;
  }

  .ts-dropdown .optgroup:first-child .optgroup-header {
    border-top: 0 none;
  }

  .ts-dropdown .optgroup-header {
    color: var(--color-gray-600);
    background: var(--color-surface);
    cursor: default;
  }

  .ts-dropdown .active {
    background-color: var(--color-gray-50);
    color: var(--color-gray-900);
  }

  .ts-dropdown .active.create {
    color: var(--color-gray-900);
  }

  .ts-dropdown .create {
    color: var(--color-gray-500);
  }

  .ts-dropdown .spinner {
    display: inline-block;
    width: 30px;
    height: 30px;
    margin: 3px 0.75rem;
  }

  .ts-dropdown .spinner:after {
    content: " ";
    display: block;
    width: 24px;
    height: 24px;
    margin: 3px;
    border-radius: 50%;
    border: 5px solid var(--color-border);
    border-color: var(--color-border) transparent var(--color-border) transparent;
    animation: ts-spinner 1.2s linear infinite;
  }

  @keyframes ts-spinner {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  /* Control */


  .ts-control,
  .ts-wrapper.single.input-active .ts-control {
    background: var(--color-surface);
    cursor: text;
  }

  .focus .ts-control {
    @apply outline-2 outline-offset-2 outline-blue border-gray-200 ring-0;
  }

  /* Validation states */
  .is-invalid .ts-control,
  .was-validated .invalid .ts-control {
    border-color: var(--color-red);
  }

  .is-invalid .focus .ts-control,
  .was-validated .invalid .focus .ts-control {
    border-color: var(--color-red);
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
  }

  .is-valid .ts-control {
    border-color: var(--color-green);
  }

  .is-valid .focus .ts-control {
    border-color: var(--color-green);
    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
  }

  /* Multi-select items */
  .ts-wrapper.multi .ts-control > div {
    cursor: pointer;
    margin: 0 3px 3px 0;
    padding: 1px 5px;
    background: #efefef;
    color: var(--color-gray-800);
    border: 0px solid var(--color-border);
    border-radius: calc(var(--radius-md) - 1px);
  }

  .ts-wrapper.multi .ts-control > div.active {
    background: var(--color-primary);
    color: var(--color-surface);
    border: 0px solid transparent;
  }

  .ts-wrapper.multi.has-items .ts-control {
    padding-left: calc(0.75rem - 5px);
  }

  /* Disabled state */
  .ts-wrapper.disabled {
    pointer-events: none;
    cursor: not-allowed !important;
  }

  .ts-wrapper.disabled:hover:not(:focus) {
    border: 0 none !important;
  }

  .ts-wrapper.disabled .ts-control {
    pointer-events: none;
    cursor: not-allowed !important;
    opacity: 0.5;
    background-color: var(--color-gray-100);
  }

  .ts-wrapper.disabled .ts-control:hover:not(:focus) {
    border: 1px solid transparent !important;
  }

  .disabled .ts-control,
  .disabled .ts-control * {
    cursor: default !important;
  }

  .disabled .ts-control {
    opacity: 0.5;
    background-color: var(--color-gray-100);
  }

  .ts-wrapper.multi.disabled .ts-control > div,
  .ts-wrapper.multi.disabled .ts-control > div.active {
    color: var(--color-gray-500);
    background: var(--color-gray-100);
    border: 0px solid var(--color-gray-200);
  }

  /* Input styling */
  .ts-control > * {
    vertical-align: baseline;
    display: inline-block;
  }

  .ts-control > input {
    @apply flex-auto inline-block! p-0! m-0! max-w-full! text-base;
    min-width: 7rem;
    min-height: 0 !important;
    max-height: none !important;
    text-indent: 0 !important;
    border: 0 none !important;
    background: none !important;
    line-height: inherit !important;
    user-select: auto !important;
    box-shadow: none !important;
  }

  .ts-control > input:focus {
    outline: none !important;
  }

  .has-items .ts-control > input {
    margin: 0px 4px !important;
  }

  /* Hidden input */
  .input-hidden .ts-control > input {
    opacity: 0;
    position: absolute;
    left: -10000px;
  }

  /* Single select caret */
  .ts-wrapper.single .ts-control {
    padding-right: 2rem;
    cursor: default;
  }

  .ts-wrapper.single .ts-control,
  .ts-wrapper.single .ts-control input {
    cursor: default;
  }

  .ts-wrapper.single .ts-control:after {
    content: none;
  }

  .ts-wrapper.single.input-active .ts-control,
  .ts-wrapper.single.input-active .ts-control input {
    cursor: text;
  }

  /* Form control integration */
  .form-control.ts-wrapper {
    padding: 0;
    height: auto;
    border: none;
    background: none;
    border-radius: 0;
  }

  /* Small size */
  .input-group-sm > .ts-wrapper .ts-control,
  .ts-wrapper.form-control-sm .ts-control {
    @apply text-xs;
    min-height: calc(1.5em + 0.5rem + 2px);
    padding: 0 0.75rem;
    border-radius: var(--radius-sm);
  }

  .input-group-sm > .ts-wrapper.has-items .ts-control,
  .ts-wrapper.form-control-sm.has-items .ts-control {
    @apply text-xs;
    min-height: calc(1.5em + 0.5rem + 2px) !important;
    padding-bottom: 0;
  }

  /* Large size */
  .input-group-lg > .ts-wrapper > .ts-control,
  .ts-wrapper.form-control-lg .ts-control {
    @apply text-xl;
    min-height: calc(1.5em + 1rem + 2px);
    border-radius: var(--radius-lg);
  }

  /* Input group integration */
  .input-group > .ts-wrapper {
    flex-grow: 1;
  }

  .input-group > .ts-wrapper:not(:nth-child(2)) > .ts-control {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  .input-group > .ts-wrapper:not(:last-child) > .ts-control {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  /* Hidden accessible */
  .ts-hidden-accessible {
    border: 0 !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
    overflow: hidden !important;
    padding: 0 !important;
    position: absolute !important;
    width: 1px !important;
    white-space: nowrap !important;
  }

  /* Remove button plugin */
  .ts-wrapper.plugin-remove_button .item .remove {
    padding: 3px 6px;
  }

  .ts-wrapper .ts-control > .item .remove {
    @apply inline-block align-middle text-base font-bold;
    margin-left: 3px;
    padding: 0 3px;
    color: inherit;
    text-decoration: none;
    border-radius: 2px;
    opacity: 0.5;
  }

  .ts-wrapper .ts-control > .item .remove:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.05);
  }

  /* Clear button plugin */
  .ts-wrapper .clear-button {
    position: absolute;
    right: calc(0.75rem + 20px);
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .ts-wrapper.focus .clear-button,
  .ts-wrapper:hover .clear-button {
    opacity: 0.5;
  }

  .ts-wrapper .clear-button:hover {
    opacity: 1;
  }

  /* Dropdown input plugin */
  .ts-dropdown.plugin-dropdown_input .dropdown-input-wrap {
    padding: 5px 0.75rem;
    border-bottom: 1px solid var(--color-border);
  }

  .ts-dropdown.plugin-dropdown_input .dropdown-input {
    @apply w-full text-sm bg-surface;
    padding: 0.375rem 0.75rem;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
  }
}
