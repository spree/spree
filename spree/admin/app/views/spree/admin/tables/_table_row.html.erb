<%# locals: (record:, columns:, table:, bulk_operations: false, sortable: false, row_actions: true) %>
<%
  row_link_url = nil
  if table.link_to_action == :show && respond_to?(:object_url)
    row_link_url = object_url(record) rescue nil
  elsif respond_to?(:edit_object_url)
    row_link_url = edit_object_url(record) rescue nil
  end
%>
<tr id="<%= dom_id record %>" class="group"<% if sortable %> data-sortable-update-url="<%= object_url(record) %>"<% end %>>
  <% if sortable %>
    <td class="w-5 move-handle text-center">
      <%= icon('grip-vertical', class: 'rounded-md hover:bg-gray-100 p-2 cursor-grab') %>
    </td>
  <% end %>

  <% if bulk_operations %>
    <td class="pr-0 w-5">
      <%= bulk_operations_checkbox(record) %>
    </td>
  <% end %>

  <% columns.each do |column| %>
    <% if row_link_url %>
      <td class="<%= column_cell_class(column) %> cursor-pointer"
          id="<%= dom_id record, column.key %>"
          data-controller="row-link"
          data-action="click->row-link#openLink">
        <%= link_to '', row_link_url, class: 'hidden', data: { row_link_target: 'link', turbo_frame: '_top' } %>
        <%= render_column_value(record, column, table) %>
      </td>
    <% else %>
      <td class="<%= column_cell_class(column) %>" id="<%= dom_id record, column.key %>">
        <%= render_column_value(record, column, table) %>
      </td>
    <% end %>
  <% end %>

  <% if row_actions %>
    <td class="w-10 text-right">
      <%= render 'spree/admin/tables/row_actions', record: record, table: table %>
    </td>
  <% end %>
</tr>
